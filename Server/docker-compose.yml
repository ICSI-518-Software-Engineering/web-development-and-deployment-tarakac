version: '3.8'
services:
  mongodb:
    image: mongo
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db

  app:
    build: ./
    ports:
      - "5000:5000"  # Ensure this matches the port exposed in the Dockerfile
    depends_on:
      - mongodb
    environment:
      MONGO_URI: "https://ec2-3-141-166-38.us-east-2.compute.amazonaws.com/-27017"

 

  caddy:
    image: caddy:2
    ports:
      - "80:5000"
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile
    depends_on:
      - client

volumes:
  mongo-data: